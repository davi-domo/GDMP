<!DOCTYPE html>
<html lang="fr">

<script language="javascript">
    // Function pour recuperer la variable GET de l'url (emprunté sur http://www.trucsweb.com/tutoriels/javascript/tw303/)
    function twRequeteVariable(sNom, sUrl) {
        if (!sUrl) sUrl = window.location.href;
        sNom = sNom.replace(/[\[\]]/g, "\\$&");
        let regex = new RegExp("[?&]" + sNom + "(=([^&#]*)|&|#|$)"),
            sResults = regex.exec(sUrl);
        if (!sResults) return null;
        if (!sResults[2]) return '';
        return decodeURIComponent(sResults[2].replace(/\+/g, " "));
    }

    // on Charge les datas celon le btn
    let name_btn = twRequeteVariable("btn");
    let title = "";
    if (name_btn == "BTN_ETAT_P_FILT") { title = "Programmation de la pompe de filtration" }
    else if (name_btn == "BTN_ETAT_ECL") { title = "Programmation De l'éclairage" }
    else { location.replace("index.html"); }
</script>

<head>
    <title>GDMP - Programmation</title>
    <!-- definition de l'encodage -->
    <meta charset="utf-8">
    <!-- Chargement de l'icone -->
    <link rel="icon" href="./img/icon_32.png" type="image/png">
    <!-- chargement des fonction JS -->
    <script type="text/javascript" src="./js/func.js"></script>
    <!-- Chargement de la feuille de style -->
    <link href="./style/cdm_btn.css" rel="stylesheet" media="all" type="text/css">

</head>

<body>
    <div id="content">
        <img id="home" src="./img/home.svg" style="position:absolute;top: 1vmax;left:1vmax;width: 6vmax;">
        <div class="box_1" style="position:absolute;top: 1vmax;left:50%;transform: translate(-50%);">
            <span id="title" class="txt_box_1"></span>
        </div>

        <div id="back" class="box_1" style="position:absolute;top: 8vmax;right:2vmax;min-width: 10vmax;">
            <span class="txt_box_2">Retour config</span>
        </div>
        <div id="valid_config" class="box_1" style="position:absolute;top: 8vmax;left:2vmax;">
            <span class="txt_box_2">Valider les modifications</span>
        </div>

        <div style="position:absolute;top: 16vmax;left:50%;transform: translate(-50%);min-width: 80vmax;">
            <div id="config_1" class="box_2" style="position:absolute;top: 0vmax;left:2vmax;">
                Programme : 1
            </div>
            <div class="box_2" style="position:absolute;top: 0vmax;left:22vmax;">
                <span class="txt_box_2">ON : </span>
                <select id="on_1"></select>
            </div>
            <div class="box_2" style="position:absolute;top: 0vmax;left:42vmax;">
                <span class="txt_box_2">DURER : </span>
                <select id="duration_1"></select>
            </div>
            <div class="box_2" style="position:absolute;top: 0vmax;left:62vmax;">
                <select id="semaine_1"></select>
            </div>
            <div id="config_2" class="box_2" style="position:absolute;top: 6vmax;left:2vmax;">
                Programme : 2
            </div>
            <div class="box_2" style="position:absolute;top: 6vmax;left:22vmax;">
                <span class="txt_box_2">ON : </span>
                <select id="on_2"></select>
            </div>
            <div class="box_2" style="position:absolute;top: 6vmax;left:42vmax;">
                <span class="txt_box_2">DURER : </span>
                <select id="duration_2"></select>
            </div>
            <div class="box_2" style="position:absolute;top: 6vmax;left:62vmax;">
                <select id="semaine_2"></select>
            </div>
            <div id="config_3" class="box_2" style="position:absolute;top: 12vmax;left:2vmax;">
                Programme : 3
            </div>
            <div class="box_2" style="position:absolute;top: 12vmax;left:22vmax;">
                <span class="txt_box_2">ON : </span>
                <select id="on_3"></select>
            </div>
            <div class="box_2" style="position:absolute;top: 12vmax;left:42vmax;">
                <span class="txt_box_2">DURER : </span>
                <select id="duration_3"></select>
            </div>
            <div class="box_2" style="position:absolute;top: 12vmax;left:62vmax;">
                <select id="semaine_3"></select>
            </div>
            <div id="config_4" class="box_2" style="position:absolute;top: 18vmax;left:2vmax;">
                Programme : 4
            </div>
            <div class="box_2" style="position:absolute;top: 18vmax;left:22vmax;">
                <span class="txt_box_2">ON : </span>
                <select id="on_4"></select>
            </div>
            <div class="box_2" style="position:absolute;top: 18vmax;left:42vmax;">
                <span class="txt_box_2">DURER : </span>
                <select id="duration_4"></select>
            </div>
            <div class="box_2" style="position:absolute;top: 18vmax;left:62vmax;">
                <select id="semaine_4"></select>
            </div>
        </div>
    </div>
</body>
<script language="JavaScript" name="script">
    // on affiche le titre de la gestion
    document.querySelector("#title").innerHTML = title;

    // on crée les option des champs select
    option_txt();

    // On selectionne les option select à l'ouverture
    maj_config(name_btn);

    // on ecoute le bouton home
    click_home = function () {
        location.replace("index.html");
    }
    btn_home = document.querySelector('#home');
    btn_home.addEventListener('click', click_home);

    // on ecoute le bouton valid_config
    click_valid_config = function () {
        maj_config(name_btn,true);
        location.replace("cdm_btn.html?btn=" + name_btn);
    }
    btn_valid_config = document.querySelector('#valid_config');
    btn_valid_config.addEventListener('click', click_valid_config);

    // on ecoute le bouton back
    click_back = function () {
        location.replace("cdm_btn.html?btn=" + name_btn);
    }
    btn_back = document.querySelector('#back');
    btn_back.addEventListener('click', click_back);

</script>

</html>