<!DOCTYPE html>
<html lang="fr">

<script language="javascript">
    // Function pour recuperer la variable GET de l'url (emprunté sur http://www.trucsweb.com/tutoriels/javascript/tw303/)
    function twRequeteVariable(sNom, sUrl) {
        if (!sUrl) sUrl = window.location.href;
        sNom = sNom.replace(/[\[\]]/g, "\\$&");
        let regex = new RegExp("[?&]" + sNom + "(=([^&#]*)|&|#|$)"),
            sResults = regex.exec(sUrl);
        if (!sResults) return null;
        if (!sResults[2]) return '';
        return decodeURIComponent(sResults[2].replace(/\+/g, " "));
    }

    // on Charge les datas celon le btn
    let name_btn = twRequeteVariable("btn");
    let title = "";
    if(name_btn == "BTN_ETAT_P_FILT"){title = "Gestion de la pompe de filtration"}
    else if(name_btn == "BTN_ETAT_ECL"){title = "Gestion De l'éclairage"}
    else{location.replace("index.html");}
</script>

<head>
    <title>GDMP - Commande relais</title>
    <!-- definition de l'encodage -->
    <meta charset="utf-8">
    <!-- Chargement de l'icone -->
    <link rel="icon" href="./img/icon_32.png" type="image/png">
    <!-- chargement des fonction JS -->
    <script type="text/javascript" src="./js/func.js"></script>
    <!-- Chargement de la feuille de style -->
    <link href="./style/cdm_btn.css" rel="stylesheet" media="all" type="text/css">

</head>

<body>
    <div id="content">
        <img id="home" src="./img/home.svg" style="position:absolute;top: 1vmax;left:1vmax;width: 6vmax;">
        <div class="box_1" style="position:absolute;top: 1vmax;left:50%;transform: translate(-50%);">
            <span id="title" class="txt_box_1">Gestion de la pompe de filtartion</span>
        </div>
        <div id="histo" class="box_1" style="position:absolute;top: 8vmax;left:2vmax;">
            <span class="txt_box_1">Historique</span>
        </div>
        <div id="mode" class="box_1" style="position:absolute;top: 8vmax;right:2vmax;min-width: 27vmax;">
            <span class="txt_box_1">MODE : </span>
            <span id="statut" class="txt_box_1">V</span>
        </div>
        <div style="position:absolute;top: 16vmax;left:50%;transform: translate(-50%);min-width: 80vmax;">
            <div id="config-1" class="box_2" style="position:absolute;top: 0vmax;left:2vmax;">
                Programme : 1
            </div>
            <div class="box_2" style="position:absolute;top: 0vmax;left:22vmax;">
                <span class="txt_box_2">ON : </span>
                <span id="on_1" class="txt_box_2">07H00</span>
            </div>
            <div id="durer_1" class="box_2" style="position:absolute;top: 0vmax;left:42vmax;">
                DURER : 2H15
            </div>
            <div id="semaine_1" class="box_2" style="position:absolute;top: 0vmax;left:62vmax;">
                Semaine type : 1
            </div>
            <div id="config-2" class="box_2" style="position:absolute;top: 6vmax;left:2vmax;">
                Programme : 2
            </div>
            <div id="on_2"class="box_2" style="position:absolute;top: 6vmax;left:22vmax;">
                ON : 11h00
            </div>
            <div id="durer_2" class="box_2" style="position:absolute;top: 6vmax;left:42vmax;">
                DURER : 2H15
            </div>
            <div id="semaine_2" class="box_2" style="position:absolute;top: 6vmax;left:62vmax;">
                Semaine type : 1
            </div>
            <div id="config-3" class="box_2" style="position:absolute;top: 12vmax;left:2vmax;">
                Programme : 3
            </div>
            <div id="on_3" class="box_2" style="position:absolute;top: 12vmax;left:22vmax;">
                ON : 14h00
            </div>
            <div id="durer_3" class="box_2" style="position:absolute;top: 12vmax;left:42vmax;">
                DURER : 2H15
            </div>
            <div id="semaine_3" class="box_2" style="position:absolute;top: 12vmax;left:62vmax;">
                Semaine type : 1
            </div>
            <div id="config-4" class="box_2" style="position:absolute;top: 18vmax;left:2vmax;">
                Programme : 4
            </div>
            <div id="on_4" class="box_2" style="position:absolute;top: 18vmax;left:22vmax;">
                ON : 17h00
            </div>
            <div id="durer_4" class="box_2" style="position:absolute;top: 18vmax;left:42vmax;">
                DURER : 2H15
            </div>
            <div id="semaine_4" class="box_2" style="position:absolute;top: 18vmax;left:62vmax;">
                Semaine type : 1
            </div>
        </div>
    </div>
</body>
<script language="JavaScript" name="script">
    // on affiche le titre de la gestion
    document.querySelector("#title").innerHTML = title;

    // On actalise les datas a l'ouverture
    maj_value('btn',name_btn);

    // on ecoute le bouton home
    click_home = function () {
        location.replace("index.html");
    }
    btn_home = document.querySelector('#home');
    btn_home.addEventListener('click', click_home);

    // on ecoute le bouton mode
    click_mode = function () {
        maj_value('cdm',name_btn);
    }
    btn_mode = document.querySelector('#mode');
    btn_mode.addEventListener('click', click_mode);

</script>

</html>